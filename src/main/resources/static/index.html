<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodFast - Giao ƒê·ªì ƒÇn Nhanh B·∫±ng Drone üöÅ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÅ</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <i class="fas fa-utensils"></i>
                    <span>FoodFast</span>
                </a>
                <nav class="nav">
                    <a href="index.html" class="nav-link active">Trang ch·ªß</a>
                    <a href="stores.html" class="nav-link">C·ª≠a h√†ng</a>
                    <a href="store-management.html" class="nav-link" id="storeManagementNav" style="display: none;">Qu·∫£n l√Ω</a>
                    <a href="cart.html" class="nav-link" id="cartNav" style="display: none;">
                        <i class="fas fa-shopping-cart"></i>
                        Gi·ªè h√†ng
                        <span class="cart-badge" id="cartBadge">0</span>
                    </a>
                    <a href="orders.html" class="nav-link" id="ordersNav" style="display: none;">ƒê∆°n h√†ng</a>
                </nav>
                <div class="header-actions">
                    <div class="user-menu" id="userMenu">
                        <!-- Will be populated by auth.js -->
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Current Location Display (Fixed at bottom-left corner) -->
    <div id="currentLocationDisplay" style="display: none; position: fixed; bottom: 20px; left: 20px; background: white; padding: 12px 16px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); z-index: 1000; max-width: 300px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <i class="fas fa-map-marker-alt" style="color: var(--primary-color);"></i>
            <strong style="font-size: 0.9rem;">V·ªã tr√≠ hi·ªán t·∫°i</strong>
            <button onclick="showLocationModal()" class="btn btn-sm" style="margin-left: auto; padding: 4px 8px; font-size: 0.75rem;">
                <i class="fas fa-sync-alt"></i> ƒê·ªïi
            </button>
        </div>
        <div style="font-size: 0.85rem; color: #666;">
            <div style="display: flex; gap: 4px;">
                <i class="fas fa-compass" style="width: 16px;"></i>
                <span id="currentLatLng">--</span>
            </div>
            <div style="display: flex; gap: 4px; margin-top: 4px;">
                <i class="fas fa-route" style="width: 16px;"></i>
                <span id="currentMethod">--</span>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1><i class="fas fa-drone"></i> Giao ƒê·ªì ƒÇn B·∫±ng Drone</h1>
            <p>Nhanh ch√≥ng ‚Ä¢ An to√†n ‚Ä¢ Hi·ªán ƒë·∫°i</p>
            <div class="search-box" style="position: relative;">
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm m√≥n ƒÉn, c·ª≠a h√†ng..." onkeypress="if(event.key==='Enter') performSearch()">
                <button onclick="clearSearch()" style="position: absolute; right: 60px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: #666; padding: 8px 12px; cursor: pointer; font-size: 1.2rem;" title="X√≥a t√¨m ki·∫øm">
                    <i class="fas fa-times"></i>
                </button>
                <button onclick="performSearch()">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="section">
        <div class="container">
            <div class="d-flex align-center justify-between mb-3" style="flex-wrap: wrap; gap: 1rem;">
                <div style="flex: 1; min-width: 250px;">
                    <h2 class="section-title" style="text-align: left; margin-bottom: 0.5rem;">üî• M√≥n ƒÇn N·ªïi B·∫≠t</h2>
                    <p class="section-subtitle" id="productsSectionSubtitle" style="margin: 0;">Nh·ªØng m√≥n ƒÉn ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>
                    <p style="margin: 0.5rem 0 0 0; font-size: 0.85rem; color: #666;">
                        <i class="fas fa-shield-alt" style="color: #28a745;"></i> Ch·ªâ hi·ªÉn th·ªã c·ª≠a h√†ng trong h√†nh lang bay an to√†n c·ªßa drone
                    </p>
                </div>
                <button id="changeLocationBtn" class="btn btn-primary" style="display: none;" onclick="showLocationModal()">
                    <i class="fas fa-map-marker-alt"></i> Ch·ªçn l·∫°i ƒë·ªãa ch·ªâ
                </button>
            </div>
            <div class="grid grid-4" id="featuredProducts"></div>
            
            <!-- Pagination -->
            <div id="productsPagination" class="pagination-container" style="display: none; margin-top: 2rem; text-align: center;">
                <button class="btn btn-secondary" id="prevPageBtn" onclick="changePage(-1)" style="margin: 0 0.5rem;">
                    <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                </button>
                <span id="pageInfo" style="margin: 0 1rem; font-weight: bold;">Trang 1</span>
                <button class="btn btn-secondary" id="nextPageBtn" onclick="changePage(1)" style="margin: 0 0.5rem;">
                    Sau <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="section" style="background: white;">
        <div class="container">
            <h2 class="section-title">üöÄ C√°ch Ho·∫°t ƒê·ªông</h2>
            <div class="grid grid-4">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="fas fa-search fa-3x text-primary mb-2"></i>
                        <h3 class="card-title">1. Ch·ªçn m√≥n</h3>
                        <p class="card-text">T√¨m ki·∫øm v√† ch·ªçn m√≥n ƒÉn y√™u th√≠ch t·ª´ c√°c c·ª≠a h√†ng</p>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body">
                        <i class="fas fa-credit-card fa-3x text-primary mb-2"></i>
                        <h3 class="card-title">2. Thanh to√°n</h3>
                        <p class="card-text">Thanh to√°n online an to√†n qua VNPay</p>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body">
                        <i class="fas fa-drone fa-3x text-primary mb-2"></i>
                        <h3 class="card-title">3. Drone giao</h3>
                        <p class="card-text">Drone t·ª± ƒë·ªông bay ƒë·∫øn l·∫•y v√† giao h√†ng</p>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body">
                        <i class="fas fa-home fa-3x text-primary mb-2"></i>
                        <h3 class="card-title">4. Nh·∫≠n h√†ng</h3>
                        <p class="card-text">Nh·∫≠n ƒë·ªì ƒÉn t·∫≠n nh√† trong 15-30 ph√∫t</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">‚ú® T·∫°i Sao Ch·ªçn FoodFast?</h2>
            <div class="grid grid-3">
                <div class="card">
                    <div class="card-body">
                        <i class="fas fa-bolt fa-2x text-primary mb-2"></i>
                        <h3 class="card-title">Si√™u Nhanh</h3>
                        <p class="card-text">Drone bay v·ªõi t·ªëc ƒë·ªô 30km/h, giao h√†ng trong 15-30 ph√∫t</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <i class="fas fa-shield-alt fa-2x text-success mb-2"></i>
                        <h3 class="card-title">An To√†n</h3>
                        <p class="card-text">C√¥ng ngh·ªá GPS ch√≠nh x√°c, gi√°m s√°t 24/7</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <i class="fas fa-leaf fa-2x text-success mb-2"></i>
                        <h3 class="card-title">Xanh & S·∫°ch</h3>
                        <p class="card-text">Kh√¥ng kh√≠ th·∫£i, th√¢n thi·ªán m√¥i tr∆∞·ªùng</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section" style="background: linear-gradient(135deg, #FF6B6B, #4ECDC4); color: white;">
        <div class="container text-center">
            <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">B·∫Øt ƒê·∫ßu ƒê·∫∑t M√≥n Ngay!</h2>
            <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">Tr·∫£i nghi·ªám c√¥ng ngh·ªá giao h√†ng hi·ªán ƒë·∫°i nh·∫•t</p>
            <a href="stores.html" class="btn btn-primary btn-lg" style="background: white; color: #FF6B6B; font-size: 1.2rem; padding: 1rem 2rem;">
                <i class="fas fa-shopping-bag"></i> Xem C·ª≠a H√†ng
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer style="background: #2C3E50; color: white; padding: 3rem 0; margin-top: 4rem;">
        <div class="container">
            <div class="grid grid-3">
                <div>
                    <div class="logo mb-2" style="color: white;">
                        <i class="fas fa-utensils"></i>
                        <span>FoodFast</span>
                    </div>
                    <p style="opacity: 0.8;">Giao ƒë·ªì ƒÉn nhanh b·∫±ng drone - C√¥ng ngh·ªá t∆∞∆°ng lai</p>
                </div>
                <div>
                    <h4 style="margin-bottom: 1rem;">Li√™n K·∫øt</h4>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <a href="stores.html" style="color: white; text-decoration: none; opacity: 0.8;">C·ª≠a h√†ng</a>
                        <a href="orders.html" style="color: white; text-decoration: none; opacity: 0.8;">ƒê∆°n h√†ng</a>
                        <a href="#" style="color: white; text-decoration: none; opacity: 0.8;">V·ªÅ ch√∫ng t√¥i</a>
                    </div>
                </div>
                <div>
                    <h4 style="margin-bottom: 1rem;">Li√™n H·ªá</h4>
                    <p style="opacity: 0.8;"><i class="fas fa-envelope"></i> support@foodfast.vn</p>
                    <p style="opacity: 0.8;"><i class="fas fa-phone"></i> 1900 1234</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
                <p style="opacity: 0.7;">&copy; 2025 FoodFast. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ƒêƒÉng Nh·∫≠p</h3>
                <button class="modal-close" onclick="closeModal('loginModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" class="form-control" name="username" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">M·∫≠t kh·∫©u</label>
                        <input type="password" class="form-control" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                    </button>
                </form>
                <p class="text-center mt-2">
                    Ch∆∞a c√≥ t√†i kho·∫£n?
                    <a href="#" onclick="closeModal('loginModal'); showRegisterModal();" style="color: var(--primary-color);">ƒêƒÉng k√Ω ngay</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ƒêƒÉng K√Ω</h3>
                <button class="modal-close" onclick="closeModal('registerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label class="form-label">H·ªç t√™n</label>
                        <input type="text" class="form-control" name="fullName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" class="form-control" name="username" required minlength="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" class="form-control" name="phone" required pattern="[0-9]{10}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">M·∫≠t kh·∫©u</label>
                        <input type="password" class="form-control" name="password" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω
                    </button>
                </form>
                <p class="text-center mt-2">
                    ƒê√£ c√≥ t√†i kho·∫£n?
                    <a href="#" onclick="closeModal('registerModal'); showLoginModal();" style="color: var(--primary-color);">ƒêƒÉng nh·∫≠p</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Location Selection Modal -->
    <div class="modal" id="locationModal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-map-marker-alt"></i> Ch·ªçn V·ªã Tr√≠ C·ªßa B·∫°n
                </h3>
            </div>
            <div class="modal-body">
                <p class="text-center mb-3" style="color: #666;">
                    ƒê·ªÉ hi·ªÉn th·ªã c√°c c·ª≠a h√†ng v√† m√≥n ƒÉn g·∫ßn b·∫°n nh·∫•t trong h√†nh lang bay an to√†n c·ªßa drone
                </p>

                <!-- GPS Option -->
                <div class="location-option card mb-3" onclick="useCurrentLocation()" style="cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                    <div class="card-body" style="padding: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-location-arrow fa-2x text-primary"></i>
                            <div>
                                <h4 style="margin: 0 0 0.5rem 0;">S·ª≠ d·ª•ng v·ªã tr√≠ hi·ªán t·∫°i</h4>
                                <p style="margin: 0; color: #666; font-size: 0.9rem;">T·ª± ƒë·ªông l·∫•y GPS t·ª´ thi·∫øt b·ªã c·ªßa b·∫°n</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manual Input Option -->
                <div class="location-option card" onclick="showManualLocationInput()" style="cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                    <div class="card-body" style="padding: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-edit fa-2x text-success"></i>
                            <div>
                                <h4 style="margin: 0 0 0.5rem 0;">Nh·∫≠p t·ªça ƒë·ªô th·ªß c√¥ng</h4>
                                <p style="margin: 0; color: #666; font-size: 0.9rem;">T·ª± nh·∫≠p vƒ© ƒë·ªô v√† kinh ƒë·ªô</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manual Input Form (Hidden initially) -->
                <div id="manualLocationForm" style="display: none; margin-top: 1rem;">
                    <hr style="margin: 1.5rem 0;">
                    <form onsubmit="setManualLocation(event)">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-compass"></i> Vƒ© ƒë·ªô (Latitude)
                            </label>
                            <input type="number"
                                   class="form-control"
                                   id="manualLatitude"
                                   step="0.000001"
                                   min="-90"
                                   max="90"
                                   placeholder="V√≠ d·ª•: 10.762622"
                                   required>
                            <small class="text-gray">Kho·∫£ng t·ª´ -90 ƒë·∫øn 90</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-compass"></i> Kinh ƒë·ªô (Longitude)
                            </label>
                            <input type="number"
                                   class="form-control"
                                   id="manualLongitude"
                                   step="0.000001"
                                   min="-180"
                                   max="180"
                                   placeholder="V√≠ d·ª•: 106.660172"
                                   required>
                            <small class="text-gray">Kho·∫£ng t·ª´ -180 ƒë·∫øn 180</small>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button type="button" class="btn btn-secondary" onclick="hideManualLocationInput()" style="flex: 1;">
                                <i class="fas fa-times"></i> H·ªßy
                            </button>
                            <button type="submit" class="btn btn-success" style="flex: 1;">
                                <i class="fas fa-check"></i> X√°c nh·∫≠n
                            </button>
                        </div>
                    </form>
                </div>

                <div class="text-center mt-3">
                    <p style="color: #999; font-size: 0.85rem;">
                        <i class="fas fa-info-circle"></i> V·ªã tr√≠ c·ªßa b·∫°n ƒë∆∞·ª£c l∆∞u trong phi√™n l√†m vi·ªác
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title" id="productModalTitle">Chi ti·∫øt s·∫£n ph·∫©m</h3>
                <button class="modal-close" onclick="closeProductModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                    <img id="productModalImage" src="" alt="Product" style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px;">
                    
                    <div>
                        <h4 style="margin-bottom: 0.5rem; color: #333;">M√¥ t·∫£</h4>
                        <p id="productModalDescription" style="color: #666; line-height: 1.6;">M√¥ t·∫£ s·∫£n ph·∫©m</p>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <div>
                            <p style="color: #666; margin-bottom: 0.25rem; font-size: 0.9rem;">Gi√°</p>
                            <p id="productModalPrice" style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color); margin: 0;">0‚Ç´</p>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <button class="btn btn-secondary" onclick="decreaseModalQuantity()">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span id="modalQuantity" style="font-size: 1.2rem; font-weight: bold; min-width: 40px; text-align: center;">1</span>
                            <button class="btn btn-secondary" onclick="increaseModalQuantity()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-outline" onclick="viewProductStoreFromModal()" style="flex: 1;">
                            <i class="fas fa-store"></i> Xem c·ª≠a h√†ng
                        </button>
                        <button class="btn btn-primary" onclick="addToCartFromModal()" style="flex: 2;">
                            <i class="fas fa-cart-plus"></i> Th√™m v√†o gi·ªè h√†ng
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
